p8105\_hw6\_ml4239
================
Man Luo
2018/11/7

------------------------------------------------------------------------

P.1
---

### tidy the data.

``` r
homicide_data <- read_csv('./data/homicide-data.csv') 

homicide_tidy<-homicide_data %>%  
  mutate(city_state = str_c(city, ",", state),
         case_status = ifelse(disposition == "Closed without arrest" | disposition == "Open/No arrest", 0, 1), 
         victim_race = ifelse(victim_race == "White", "White", "Nonwhite"), 
         victim_race = factor(victim_race, levels = c("White", "Nonwhite")), #factor
         victim_age = as.numeric(victim_age))%>% 
  filter(!(city_state %in% c('Dallas,TX', 'Phoenix,AZ','Kansas City,MO',"Tulsa,AL"))) #omit cities
```

    ## Warning in evalq(as.numeric(victim_age), <environment>): NAs introduced by
    ## coercion

### regression fpr the city of Baltimore, MD

``` r
baltimore <-homicide_tidy %>% 
  filter(city_state == "Baltimore,MD")

fit_logistic = 
  baltimore %>% 
  glm(case_status ~ victim_age + victim_race + victim_sex, data = ., family = binomial())  #Save the output of glm as an R object
```

Obtain the estimate and confidence interval of the adjusted odds ratio for solving homicides comparing non-white victims to white victims keeping all other variables fixed.

``` r
fit_logistic %>% 
  broom::tidy() %>% 
  mutate(OR = exp(estimate),
         conf.low = exp(estimate - std.error*1.96),
         conf.high = exp(estimate + std.error*1.96)) %>% 
  select(term, OR, conf.low, conf.high, p.value) %>% 
  knitr::kable()
```

| term                 |         OR|   conf.low|  conf.high|    p.value|
|:---------------------|----------:|----------:|----------:|----------:|
| (Intercept)          |  3.2740589|  2.0671700|  5.1855735|  0.0000004|
| victim\_age          |  0.9930344|  0.9867043|  0.9994050|  0.0321594|
| victim\_raceNonwhite |  0.4406080|  0.3129079|  0.6204234|  0.0000027|
| victim\_sexMale      |  0.4115656|  0.3152280|  0.5373452|  0.0000000|

Here we can see the estimate of the adjusted odds ratio for solving homicides comparing non-white is 0.4406080, and 95% confidence interval is (0.3129079, 0.6204234)
